<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SayÄ± Okuyucu - Ã‡oklu Dil DesteÄŸi ile SayÄ±larÄ± Sesli Okuyun</title>
    
    <!-- Vercel Analytics -->
    <script src="https://unpkg.com/@vercel/analytics@1.1.1/dist/analytics.min.js"></script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3050374663523366"
    crossorigin="anonymous"></script>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="SayÄ± Okuyucu ile farklÄ± dillerde sayÄ±larÄ± sesli olarak dinleyin. TÃ¼rkÃ§e, Ä°ngilizce, Almanca, FransÄ±zca ve daha birÃ§ok dil desteÄŸi ile sayÄ±larÄ± kolayca Ã¶ÄŸrenin.">
    <meta name="keywords" content="sayÄ± okuyucu, sesli sayÄ± okuma, dil Ã¶ÄŸrenme, sayÄ± Ã¶ÄŸrenme, Ã§oklu dil desteÄŸi, TÃ¼rkÃ§e sayÄ±lar, Ä°ngilizce sayÄ±lar">
    <meta name="author" content="SayÄ± Okuyucu">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://fast-number-reader.vercel.app/">
    <meta property="og:title" content="SayÄ± Okuyucu - Ã‡oklu Dil DesteÄŸi ile SayÄ±larÄ± Sesli Okuyun">
    <meta property="og:description" content="SayÄ± Okuyucu ile farklÄ± dillerde sayÄ±larÄ± sesli olarak dinleyin. TÃ¼rkÃ§e, Ä°ngilizce, Almanca, FransÄ±zca ve daha birÃ§ok dil desteÄŸi ile sayÄ±larÄ± kolayca Ã¶ÄŸrenin.">
    <meta property="og:image" content="https://fast-number-reader.vercel.app/images/world.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://fast-number-reader.vercel.app/">
    <meta property="twitter:title" content="SayÄ± Okuyucu - Ã‡oklu Dil DesteÄŸi ile SayÄ±larÄ± Sesli Okuyun">
    <meta property="twitter:description" content="SayÄ± Okuyucu ile farklÄ± dillerde sayÄ±larÄ± sesli olarak dinleyin. TÃ¼rkÃ§e, Ä°ngilizce, Almanca, FransÄ±zca ve daha birÃ§ok dil desteÄŸi ile sayÄ±larÄ± kolayca Ã¶ÄŸrenin.">
    <meta property="twitter:image" content="https://fast-number-reader.vercel.app/images/world.png">

    <link rel="icon" type="image/png" href="images/world.png">
    <link rel="apple-touch-icon" href="images/world.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://fast-number-reader.vercel.app/">
    
    <style>
        :root {
            /* Renk Paleti */
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --danger: #ef4444;
            --danger-light: #f87171;
            --success: #10b981;
            --warning: #f59e0b;
            
            /* Light Theme */
            --bg-light: #f8fafc;
            --text-light: #1e293b;
            --card-light: #ffffff;
            --border-light: #e2e8f0;
            --input-bg-light: #ffffff;
            
            /* Dark Theme */
            --bg-dark: #0f172a;
            --text-dark: #e2e8f0;
            --card-dark: #1e293b;
            --border-dark: #334155;
            --input-bg-dark: #1e293b;
            
            /* DiÄŸer */
            --shadow-light: rgba(0,0,0,0.1);
            --shadow-dark: rgba(0,0,0,0.3);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            background: var(--bg-light);
            color: var(--text-light);
            transition: var(--transition);
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(99, 102, 241, 0.05) 0%, transparent 20%);
        }

        body.dark-mode {
            background: var(--bg-dark);
            color: var(--text-dark);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(122, 162, 247, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(187, 154, 247, 0.1) 0%, transparent 20%);
        }

        /* YardÄ±m ModalÄ± iÃ§in DÃ¼zenleme */
        #helpModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        #helpModal .card {
            max-width: 90%;
            width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            margin: 20px;
            padding: 20px;
        }

        .container {
            max-width: 650px;
            margin: 0 auto;
            padding: 1.5rem;
            width: 100%;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        h1 {
            margin: 0;
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-size: 2.2rem;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        /* Kartlar */
        .card {
            background: var(--card-light);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px var(--shadow-light);
            margin-bottom: 1.5rem;
            transition: var(--transition);
            border: 1px solid var(--border-light);
        }

        body.dark-mode .card {
            background: var(--card-dark);
            box-shadow: 0 4px 6px var(--shadow-dark);
            border-color: var(--border-dark);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px var(--shadow-light);
        }

        /* Form ElemanlarÄ± */
        .form-group {
            margin: 1.25rem 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .form-label {
            flex: 1;
            min-width: 120px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        input[type="text"],
        input[type="number"],
        select {
            padding: 0.75rem;
            border: 1px solid var(--border-light);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--input-bg-light);
            width: 100%;
            max-width: 200px;
        }

        body.dark-mode input[type="text"],
        body.dark-mode input[type="number"],
        body.dark-mode select {
            background: var(--input-bg-dark);
            border-color: var(--border-dark);
            color: var(--text-dark);
        }

        /* Butonlar */
        .btn {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 6px rgba(59, 130, 246, 0.2);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger), var(--danger-light));
            color: white;
            box-shadow: 0 4px 6px rgba(239, 68, 68, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }

        .btn:active {
            transform: translateY(1px);
        }

        /* SonuÃ§ EkranÄ± */
        #resultDisplay {
            font-size: 3.5rem;
            font-weight: 800;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(59, 130, 246, 0.05);
            border-radius: 0.75rem;
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--border-light);
            cursor: pointer;
            user-select: none;
        }

        body.dark-mode #resultDisplay {
            background: rgba(30, 41, 59, 0.5);
            border-color: var(--border-dark);
        }

        #resultDisplay:hover {
            background: #3b82f614;
        }

        #resultDisplay.copied {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* Tema Butonu */
        .theme-toggle {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        /* Range Input */
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            border-radius: 4px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px #0000001a;
        }

        body.dark-mode input[type="range"] {
            background: linear-gradient(90deg, #7aa2f7, #bb9af7);
        }

        /* GeÃ§miÅŸ Listesi */
                .history-section {
            position: relative; /* BaÅŸlÄ±k iÃ§in referans oluÅŸturuyoruz */
            margin-top: 1rem;
            padding: 0;
        }

        .history-title {
            position: absolute; /* BaÅŸlÄ±ÄŸÄ± normal akÄ±ÅŸtan Ã§Ä±karÄ±yoruz */
            top: 0;
            left: 0;
            right: 0;
            text-align: center;
            margin: 0;
            padding: 0.5rem 0;
            transition: opacity 0.3s ease;
            pointer-events: none; /* TÄ±klamalara engel olmamasÄ± iÃ§in */
        }

        .history-title.active {
            opacity: 0;
        }

                .history-list {
            display: flex;
            flex-wrap: wrap; /* SatÄ±r dolunca alt satÄ±ra geÃ§ */
            gap: 0.6rem;
            padding: 0.6rem;
            max-height: 150px; /* Sabit yÃ¼kseklik */
            overflow-y: auto; /* Sadece dikey scroll */
            overflow-x: hidden; /* Yatay scroll'u gizle */
            align-content: flex-start; /* Ãœstten hizala */
            scroll-behavior: smooth;
        }
            
               .history-item {
            padding: 0.5rem 0.8rem;
            background: rgba(255,255,255,0.9);
            border-radius: 0.5rem;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
            flex: 0 0 auto; /* Esneme yapma */
            margin-bottom: 0.3rem; /* SatÄ±rlar arasÄ± boÅŸluk */
            flex: 0 0 auto; /* KutularÄ±n boyutu iÃ§erik kadar olsun */
            white-space: nowrap; /* SayÄ±larÄ±n tek satÄ±rda kalmasÄ± */
        }

                body.dark-mode .history-item {
            background: #0000001a;
        }

        @media (max-width: 768px) {
            .history-list {
                max-height: 100px;
                gap: 0.4rem;
            }
            .history-item {
                font-size: 0.9rem;
                padding: 0.4rem 0.6rem;
            }
        }

    
        /* Ä°statistikler */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: rgba(59, 130, 246, 0.05);
            border-radius: 0.5rem;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            #resultDisplay {
                font-size: 2.5rem;
                padding: 1rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .form-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            input[type="text"],
            input[type="number"],
            select {
                max-width: 100%;
            }
        }

        /* AdSense */
        .ad-container {
            display: none; /* Mobilde gizle */
        }

        @media (min-width: 1200px) {
            .ad-container {
                display: block;
                position: fixed;
                top: 20px;
                width: 160px;
                background: var(--card-light);
                border-radius: 8px;
                padding: 10px;
                box-shadow: 0 4px 6px var(--shadow-light);
                z-index: 100;
            }
            
            .ad-left {
                left: 20px;
            }
            
            .ad-right {
                right: 20px;
            }
            
            body.dark-mode .ad-container {
                background: var(--card-dark);
                box-shadow: 0 4px 6px var(--shadow-dark);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span style="font-size: 1.2em;">ğŸŒ</span> <span class="lang-text" data-key="title">SayÄ± Okuyucu</span></h1>
            <button class="btn theme-toggle" id="themeToggle">
                <span id="themeIcon">ğŸŒ™</span> <span class="lang-text" data-key="theme">Koyu Mod</span>
            </button>
        </div>
        
        <div class="card">

            <div style="text-align: right; margin-bottom: 1rem;">
                <button id="helpBtn" class="btn" style="background: var(--warning); color: white; padding: 0.5rem 1rem;">
                    <span>â”</span> <span class="lang-text" data-key="help">YardÄ±m</span>
                </button>
            </div>

            <div class="form-group">
                <span class="form-label lang-text" data-key="language">Dil SeÃ§imi:</span>
                <select id="languageSelect" class="form-control">
                    <option value="tr-TR">Turkish</option>
                    <option value="en-US">English (US)</option>
                    <option value="en-GB">English (UK)</option>
                    <option value="de-DE">German</option>
                    <option value="fr-FR">French</option>
                    <option value="es-ES">Spanish</option>
                    <option value="ja-JP">Japanese</option>
                    <option value="ru-RU">Russian</option>
                    <option value="zh-CN">Chinese</option>
                    <option value="it-IT">Italian</option>
                </select>
            </div>
            
            <div class="form-group">
                <span class="form-label lang-text" data-key="range">SayÄ± AralÄ±ÄŸÄ±:</span>
                <div style="display:flex; gap:0.5rem; align-items:center; width:100%; max-width:300px;">
                    <input type="text" id="minValue" value="100.000" placeholder="Min" class="form-control">
                    <span>-</span>
                    <input type="text" id="maxValue" value="1.000.000" placeholder="Max" class="form-control">
                </div>
            </div>
            
            <div class="form-group">
                <span class="form-label lang-text" data-key="speed">Okuma HÄ±zÄ±:</span>
                <div style="display:flex; align-items:center; gap:0.5rem; flex:1; min-width:200px;">
                    <input type="range" id="speedControl" min="0.5" max="5.0" step="0.1" value="1.0" class="form-control">
                    <span id="speedDisplay" style="min-width:40px;">1.0x</span>
                </div>
            </div>
            
            <div class="form-group">
                <span class="form-label lang-text" data-key="delay">GeÃ§iÅŸ SÃ¼resi:</span>
                <div style="display:flex; align-items:center; gap:0.5rem; flex:1; min-width:200px;">
                    <input type="range" id="delayControl" min="0" max="5" step="0.5" value="0" class="form-control">
                    <span id="delayDisplay" style="min-width:30px;">0s</span>
                </div>
            </div>

            <div style="text-align:center; margin-top:1.5rem;">
                <button id="startBtn" class="btn btn-primary lang-text" data-key="start">BAÅLAT</button>
                <button id="stopBtn" disabled class="btn btn-danger lang-text" data-key="stop">DURDUR</button>
            </div>
        </div>
        
        <div id="resultDisplay">---</div>

        <div class="card history-section" style="max-height: 200px;">
            <h3 class="history-title lang-text" data-key="history">Okunan SayÄ±lar</h3>
            <div class="history-list" id="historyList" style="height: 150px;"></div>
        </div>

        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-value" id="totalNumbers">0</div>
                <div class="stat-label lang-text" data-key="totalNumbersLabel">Toplam SayÄ±</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalTime">0</div>
                <div class="stat-label lang-text" data-key="totalTimeLabel">Toplam SÃ¼re (dk)</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="favoriteLanguage">-</div>
                <div class="stat-label lang-text" data-key="favoriteLanguageLabel">En Ã‡ok KullanÄ±lan Dil</div>
            </div>
        </div>
        
        <div class="ad-container ad-left">
            <div class="ad-container ad-left">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-3050374663523366"
                     data-ad-slot="1234567890"  <!-- Bu kÄ±smÄ± gerÃ§ek slot ID ile deÄŸiÅŸtir -->
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
              </div>
              <script>
                try {
                  const ad = document.querySelector('ins.adsbygoogle');
                  if (ad && !ad.dataset.loaded) {
                    ad.dataset.loaded = 'true';
                    (adsbygoogle = window.adsbygoogle || []).push({});
                  }
                } catch(e) {
                  console.log("AdSense yÃ¼klenemedi", e);
                }
              </script>
        </div>

        <div id="helpModal">
            <div class="card">
                <h2 class="lang-text" data-key="helpTitle">Dil DesteÄŸi YardÄ±m</h2>
                <p class="lang-text" data-key="helpText1">UygulamamÄ±z tÃ¼m dilleri desteklemektedir, ancak tarayÄ±cÄ±nÄ±zÄ±n ve iÅŸletim sisteminizin ilgili dil paketlerini yÃ¼klemiÅŸ olmasÄ± gerekmektedir.</p>
                
                <div style="text-align: center; margin-top: 1.5rem;">
                    <button id="closeHelp" class="btn btn-primary lang-text" data-key="closeHelp">Tamam</button>
                </div>
            </div>
        </div>

        <div style="text-align: right; margin-top: 0.5rem;">
            <button id="clearHistoryBtn" class="btn" style="background: var(--danger); color: white;">
                <span class="lang-text" data-key="clearHistory">GeÃ§miÅŸi Temizle</span>
            </button>
        </div>
        
    </div>

    <script>

        const themeToggle = document.getElementById('themeToggle');
Â  Â  Â  Â  const themeIcon = document.getElementById('themeIcon');
Â  Â  Â  Â  const body = document.body;
Â  Â  Â  Â  const themeTextSpan = themeToggle ? themeToggle.querySelector('.lang-text') : null; // Element var mÄ± kontrol et

Â  Â  Â  Â  function setTheme(theme) {
Â  Â  Â  Â  Â  Â  if (theme === 'dark') {
Â  Â  Â  Â  Â  Â  Â  Â  body.classList.add('dark-mode');
Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.textContent = 'â˜€ï¸';
Â  Â  Â  Â  Â  Â  Â  Â  if (themeTextSpan) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeTextSpan.textContent = 'AÃ§Ä±k Mod';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeTextSpan.dataset.key = 'themeLight';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('theme', 'dark');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  body.classList.remove('dark-mode');
Â  Â  Â  Â  Â  Â  Â  Â  themeIcon.textContent = 'ğŸŒ™';
Â  Â  Â  Â  Â  Â  Â  Â  if (themeTextSpan) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeTextSpan.textContent = 'Koyu Mod';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  themeTextSpan.dataset.key = 'themeDark';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('theme', 'light');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleTheme() {
Â  Â  Â  Â  Â  Â  body.classList.toggle('dark-mode');
Â  Â  Â  Â  Â  Â  const isDarkMode = body.classList.contains('dark-mode');
Â  Â  Â  Â  Â  Â  setTheme(isDarkMode ? 'dark' : 'light');
Â  Â  Â  Â  }

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  // Sayfa yÃ¼klendiÄŸinde localStorage veya sistem tercihine gÃ¶re temayÄ± ayarla
Â  Â  Â  Â  Â  Â  const savedTheme = localStorage.getItem('theme');
Â  Â  Â  Â  Â  Â  if (savedTheme) {
Â  Â  Â  Â  Â  Â  Â  Â  setTheme(savedTheme);
Â  Â  Â  Â  Â  Â  } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
Â  Â  Â  Â  Â  Â  Â  Â  setTheme('dark');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  setTheme('light'); // VarsayÄ±lan tema
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Tema deÄŸiÅŸtirme butonuna tÄ±klama olayÄ± ekle (sadece bir kez tanÄ±mla)
Â  Â  Â  Â  Â  Â  if (themeToggle) {
Â  Â  Â  Â  Â  Â  Â  Â  themeToggle.addEventListener('click', toggleTheme);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // DiÄŸer baÅŸlangÄ±Ã§ kodlarÄ±...
Â  Â  Â  Â  Â  Â  window.speechSynthesis.onvoiceschanged = function() {
Â  Â  Â  Â  Â  Â  Â  Â  sesleriYukle().then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sesiGuncelle();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateLanguage(languageSelect.value);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  window.speechSynthesis.getVoices();
Â  Â  Â  Â  });

 
        document.addEventListener('DOMContentLoaded', () => {
            // Sesler yÃ¼klenene kadar bekleyin
            sesleriYukle().then(() => {
                sesiGuncelle();
                updateLanguage(languageSelect.value);
            });
            
            // TarayÄ±cÄ±ya Ã¶zel ayarlar
            const { isChrome, isSafari } = getBrowserInfo();
            if (isSafari) {
                // Safari iÃ§in Ã¶zel baÅŸlatma
                const initSpeech = new SpeechSynthesisUtterance(" ");
                initSpeech.volume = 0;
                window.speechSynthesis.speak(initSpeech);
            }
        });



        // 1. GENEL AYARLAR ve DEÄÄ°ÅKENLER
        const speech = new SpeechSynthesisUtterance();
        const languageSelect = document.getElementById('languageSelect');
        const speedControl = document.getElementById('speedControl');
        const speedDisplay = document.getElementById('speedDisplay');
        const delayControl = document.getElementById('delayControl');
        const delayDisplay = document.getElementById('delayDisplay');
        const resultDisplay = document.getElementById('resultDisplay');
        
        let sesler = [];
        let seciliSes = null;
        let timeoutID = null;
        let isActive = false;
        let numberHistory = [];
        let totalNumbers = 0;
        let totalTime = 0;
        let languageUsage = {};
        let startTime;
        
        // 2. TARAYICI BÄ°LGÄ°LERÄ°
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            return {
                isChrome: /Chrome/.test(ua),
                isSafari: /Safari/.test(ua) && !/Chrome/.test(ua),
                isFirefox: /Firefox/.test(ua),
                isMac: navigator.platform.includes('Mac')
            };
        }

                // GeliÅŸmiÅŸ tarayÄ±cÄ± ve OS tespiti
        function getSystemInfo() {
            const ua = navigator.userAgent;
            let os, browser;
            
            // Ä°ÅŸletim Sistemi
            if (ua.match(/Android/i)) os = 'Android';
            else if (ua.match(/iPhone|iPad|iPod/i)) os = 'iOS';
            else if (ua.match(/Windows/i)) os = 'Windows';
            else if (ua.match(/Macintosh|Mac OS X/i)) os = 'MacOS';
            else if (ua.match(/Linux/i)) os = 'Linux';
            else os = 'Unknown OS';
            
            // TarayÄ±cÄ±
            if (ua.match(/Chrome/i) && !ua.match(/Edg/i)) browser = 'Chrome';
            else if (ua.match(/Firefox/i)) browser = 'Firefox';
            else if (ua.match(/Safari/i) && !ua.match(/Chrome/i)) browser = 'Safari';
            else if (ua.match(/Edg/i)) browser = 'Edge';
            else if (ua.match(/Opera|OPR/i)) browser = 'Opera';
            else browser = 'Unknown Browser';
            
            return { os, browser };
        }
        
        // 3. TEMEL FONKSÄ°YONLAR
        function formatNumberWithDots(number) {
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }
        
        function getNumericValue(inputId) {
            const value = document.getElementById(inputId).value.replace(/\./g, '');
            return parseInt(value) || 0;
        }
        
        function createNotification(text, icon) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${icon}</span>
                    <span class="notification-text">${text}</span>
                </div>
            `;
            return notification;
        }
        
        function showNotification(notification) {
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.classList.add('fade-out');
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

                // Web Speech API fallback fonksiyonu
        function getBestAvailableVoice(lang) {
            const voices = window.speechSynthesis.getVoices();
            const exactMatch = voices.find(v => v.lang === lang);
            if (exactMatch) return exactMatch;

            const langPrefix = lang.split('-')[0];
            const langMatch = voices.find(v => v.lang.startsWith(langPrefix));
            if (langMatch) return langMatch;

            // EÄŸer hiÃ§bir ses bulunamazsa, varsayÄ±lan Ä°ngilizce sesi kullan
            const defaultVoice = voices.find(v => v.lang.startsWith('en')) || voices[0];
            return defaultVoice;
        }

        // GÃ¼ncellenmiÅŸ sesiGuncelle fonksiyonu
            function sesiGuncelle() {
        const secilenDil = languageSelect.value;
        const voices = window.speechSynthesis.getVoices();
        
        // Ã–nce tam eÅŸleÅŸen sesi ara
        seciliSes = voices.find(v => v.lang === secilenDil);
        
        // Tam eÅŸleÅŸme yoksa:
        if (!seciliSes) {
            const langPrefix = secilenDil.split('-')[0];
            
            // 1. AynÄ± dil ailesinden yerel bir ses bul
            seciliSes = voices.find(v => v.lang.startsWith(langPrefix) && v.localService);
            
            // 2. Herhangi bir aynÄ± dil ailesinden ses bul
            if (!seciliSes) {
                seciliSes = voices.find(v => v.lang.startsWith(langPrefix));
            }
            
            // 3. VarsayÄ±lan Ä°ngilizce sesi kullan
            if (!seciliSes) {
                seciliSes = voices.find(v => v.lang.startsWith('en')) || voices[0];
                
                // KullanÄ±cÄ±yÄ± bilgilendir
                if (secilenDil !== 'tr-TR' && secilenDil !== 'en-US') {
                    const notification = createNotification(
                        `${secilenDil} iÃ§in uygun ses bulunamadÄ±. Ä°ngilizce ses kullanÄ±lÄ±yor.`,
                        'âš ï¸'
                    );
                    showNotification(notification);
                }
            }
        }
        
        speech.voice = seciliSes;
        speech.lang = seciliSes.lang;
        setVoiceSettings(secilenDil);
    }
        
        // 4. SES YÃ–NETÄ°MÄ°
         // Ses yÃ¼kleme ve kontrol fonksiyonunu gÃ¼ncelleyelim
                function sesleriYukle() {
            return new Promise((resolve) => {
                const checkVoices = () => {
                    const voices = window.speechSynthesis.getVoices();
                    if (voices.length > 0) {
                        sesler = voices;
                        resolve(voices);
                    } else {
                        setTimeout(checkVoices, 100);
                    }
                };
                checkVoices();
            });
        }

        // Desteklenen dilleri kontrol eden fonksiyon
        function checkSupportedLanguages(voices) {
            const supportedLanguages = {};
            voices.forEach(voice => {
                const langCode = voice.lang.split('-')[0];
                supportedLanguages[langCode] = true;
            });

            // SeÃ§enekleri filtrele
            const languageSelect = document.getElementById('languageSelect');
            Array.from(languageSelect.options).forEach(option => {
                const langCode = option.value.split('-')[0];
                if (!supportedLanguages[langCode] && option.value !== 'tr-TR' && option.value !== 'en-US') {
                    option.disabled = true;
                    option.title = "Bu dil tarayÄ±cÄ±nÄ±zda desteklenmiyor";
                }
            });
        }

                function setVoiceSettings(lang) {
            const { isMac, isChrome } = getBrowserInfo();
            const langCode = lang.split('-')[0];
            
            // Temel hÄ±z ayarÄ±
            let rate = parseFloat(speedControl.value);
            
            // TÃ¼rkÃ§e harici diller iÃ§in maksimum 2x sÄ±nÄ±rÄ±
            if (langCode !== 'tr') {
                rate = Math.min(rate, 2.0);
            }
            
            // TarayÄ±cÄ± ve iÅŸletim sistemi Ã¶zel kÄ±sÄ±tlamalarÄ±
            if (isChrome && isMac) {
                rate = Math.min(rate, 1.5);
            }
            
            // Son hÄ±z ayarÄ±nÄ± uygula
            speech.rate = rate;
            speech.pitch = 1.0;
            
            // HÄ±z kontrol input'unu gÃ¼ncelle (eÄŸer sÄ±nÄ±rlandÄ±rÄ±ldÄ±ysa)
            if (rate !== parseFloat(speedControl.value)) {
                speedControl.value = rate;
                speedDisplay.textContent = rate.toFixed(1) + 'x';
            }
        }
        
    
            // TarayÄ±cÄ± tÃ¼rÃ¼ne gÃ¶re Ã¶zel ayarlar
        function applyBrowserSpecificFixes() {
            const { isChrome, isFirefox, isSafari } = getBrowserInfo();
            
            if (isFirefox) {
                // Firefox iÃ§in Ã¶zel ayarlar
                speech.volume = 1;
                speech.pitch = 1;
            }
            
            if (isChrome) {
                // Chrome iÃ§in Ã¶zel ayarlar
                speech.volume = 0.9;
            }
            
            if (isSafari) {
                // Safari iÃ§in Ã¶zel ayarlar
                const initSpeech = new SpeechSynthesisUtterance(" ");
                initSpeech.volume = 0;
                window.speechSynthesis.speak(initSpeech);
            }
        }

        // Sayfa yÃ¼klendiÄŸinde Ã§aÄŸÄ±r
        document.addEventListener('DOMContentLoaded', () => {
            applyBrowserSpecificFixes();
        });
        
                        // 5. OKUMA Ä°ÅLEMLERÄ°
                        function addToHistory(number, lang) {
            const formattedNumber = formatNumberWithDots(number);
            numberHistory.push({ number: formattedNumber, lang: lang }); // En yeni en sona
            
            const historyList = document.getElementById('historyList');
            const div = document.createElement('div');
            div.className = 'history-item';
            div.textContent = formattedNumber;
            historyList.appendChild(div); // SaÄŸa ekle
            
            
            // Scroll'u en alta kaydÄ±r
            historyList.scrollTop = historyList.scrollHeight;
            
            // BaÅŸlÄ±ÄŸÄ± gizle
            document.querySelector('.history-title').classList.toggle('active', numberHistory.length > 0);
        }
        
                let currentUtterance = null;
        let isSpeaking = false;

        async function readNumber() {
            if (!isActive) return;

            // Ã–nceki konuÅŸmayÄ± temizle
            if (currentUtterance) {
                window.speechSynthesis.cancel();
            }

            const sayi = Math.floor(Math.random() * (getNumericValue('maxValue') - getNumericValue('minValue') + 1)) + getNumericValue('minValue');
            resultDisplay.textContent = formatNumberWithDots(sayi);
            addToHistory(sayi, languageSelect.value);

            // Yeni utterance oluÅŸtur
            currentUtterance = new SpeechSynthesisUtterance(sayi.toString());
            currentUtterance.voice = seciliSes;
            currentUtterance.lang = seciliSes.lang;
            currentUtterance.rate = parseFloat(speedControl.value);
            
            // Ä°statistikleri gÃ¼ncelle
            const lang = languageSelect.value;
            languageUsage[lang] = (languageUsage[lang] || 0) + 1;
            totalNumbers++;
            updateStats();

            // Promise tabanlÄ± konuÅŸma fonksiyonu
            try {
                isSpeaking = true;
                await speakUtterance(currentUtterance);
                
                if (isActive) {
                    const delay = parseFloat(delayControl.value) * 1000;
                    timeoutID = setTimeout(readNumber, delay);
                }
            } catch (error) {
                console.error("Okuma hatasÄ±:", error);
                if (isActive) {
                    const delay = parseFloat(delayControl.value) * 1000;
                    timeoutID = setTimeout(readNumber, delay);
                }
            } finally {
                isSpeaking = false;
            }
        }

        function speakUtterance(utterance) {
            return new Promise((resolve, reject) => {
                utterance.onend = resolve;
                utterance.onerror = reject;
                
                // Firefox iÃ§in Ã¶zel kontrol
                if (getBrowserInfo().isFirefox) {
                    utterance.onboundary = (event) => {
                        if (event.name === 'word') {
                            // Firefox'ta aktif kalmasÄ±nÄ± saÄŸla
                        }
                    };
                }
                
                window.speechSynthesis.speak(utterance);
                
                // Chrome iÃ§in ek kontrol
                if (getBrowserInfo().isChrome) {
                    setTimeout(() => {
                        if (isSpeaking && !window.speechSynthesis.speaking) {
                            reject(new Error("Chrome'da okuma durdu"));
                        }
                    }, 500);
                }
            });
        }

                    // Alternatif TTS fonksiyonu
                        function useAlternativeTTS(text, lang) {
            console.log(`Fallback TTS deneniyor: ${text} (${lang})`);
            
            // Basit bir fallback mekanizmasÄ±
            const fallbackUtterance = new SpeechSynthesisUtterance(text);
            fallbackUtterance.lang = 'en-US'; // Garanti bir dil kullan
            fallbackUtterance.rate = Math.min(parseFloat(speedControl.value), 1.5);
            
            fallbackUtterance.onend = () => {
                if(isActive) {
                    const delay = parseFloat(delayControl.value) * 1000;
                    timeoutID = setTimeout(readNumber, delay);
                }
            };
            
            window.speechSynthesis.speak(fallbackUtterance);
        }
        // Alternatif ses motoru iÃ§in fallback fonksiyonunu ekleyin (readNumber'dan Ã¶nce)
        function speakWithFallback(text, lang, rate) {
            return new Promise((resolve) => {
                // Ã–nce tarayÄ±cÄ±nÄ±n yerel ses motorunu dene
                try {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = lang;
                    utterance.rate = rate;
                    utterance.onend = resolve;
                    utterance.onerror = () => {
                        console.log('Yerel ses motoru hatasÄ±, fallback deneniyor');
                        fallbackTTS(text, lang).then(resolve);
                    };
                    window.speechSynthesis.speak(utterance);
                } catch (e) {
                    console.log('Yerel ses motoru hatasÄ±:', e);
                    fallbackTTS(text, lang).then(resolve);
                }
            });
        }

        // Basit bir fallback mekanizmasÄ±
        function fallbackTTS(text, lang) {
            return new Promise((resolve) => {
                console.log(`Fallback TTS: ${text} in ${lang}`);
                // Burada bir TTS API'si kullanabilirsiniz
                setTimeout(resolve, text.length * 100); // Basit bir simÃ¼lasyon
            });
        }
                
        function startReading() {
            const { isSafari } = getBrowserInfo();
            
            if (isSafari) {
                const initSpeech = new SpeechSynthesisUtterance(" ");
                initSpeech.volume = 0;
                window.speechSynthesis.speak(initSpeech);
                initSpeech.onend = () => {
                    setTimeout(readNumber, 200);
                };
            } else {
                setTimeout(readNumber, 300);
            }
            
            isActive = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            languageSelect.disabled = true;
            document.getElementById('minValue').disabled = true;
            document.getElementById('maxValue').disabled = true;
            
            startTime = Date.now();
            totalNumbers = 0;
            updateStats();
            document.querySelector('.history-title').style.opacity = '0';
        }
        
                async function stopReading() {
            isActive = false;
            
            // TÃ¼m konuÅŸmalarÄ± ve zamanlayÄ±cÄ±larÄ± temizle
            window.speechSynthesis.cancel();
            clearTimeout(timeoutID);
            timeoutID = null;
            currentUtterance = null;
            
            // Safari iÃ§in ek temizlik
            if (getBrowserInfo().isSafari) {
                const silence = new SpeechSynthesisUtterance("");
                silence.volume = 0;
                window.speechSynthesis.speak(silence);
            }
            
            // UI gÃ¼ncellemeleri
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            languageSelect.disabled = false;
            document.getElementById('minValue').disabled = false;
            document.getElementById('maxValue').disabled = false;
            
            // SÃ¼re hesaplamasÄ±
            if (startTime) {
                totalTime += (Date.now() - startTime) / 1000;
                startTime = null;
                updateStats();
            }
        }
                
                // 6. DÄ°L ve TEMA YÃ–NETÄ°MÄ°
                const translations = {
            'tr-TR': {
                title: 'SayÄ± Okuyucu',
                theme: 'Koyu Mod',
                range: 'SayÄ± AralÄ±ÄŸÄ±:',
                speed: 'Okuma HÄ±zÄ±:',
                delay: 'GeÃ§iÅŸ SÃ¼resi:',
                start: 'BAÅLAT',
                stop: 'DURDUR',
                min: 'Min',
                max: 'Max',
                history: 'Okunan SayÄ±lar',
                help: 'YardÄ±m',
                helpTitle: 'Dil DesteÄŸi YardÄ±m',
                helpText1: 'UygulamamÄ±z tÃ¼m dilleri desteklemektedir, ancak tarayÄ±cÄ±nÄ±zÄ±n ve iÅŸletim sisteminizin ilgili dil paketlerini yÃ¼klemiÅŸ olmasÄ± gerekmektedir.',
                closeHelp: 'Tamam',
                totalNumbersLabel: 'Toplam SayÄ±',
                totalTimeLabel: 'Toplam SÃ¼re (dk)',
                favoriteLanguageLabel: 'En Ã‡ok KullanÄ±lan Dil',
                themeDark: 'Dark Mode',
                themeLight: 'Light Mode'
            },
            'en-US': {
                title: 'Number Reader',
                theme: 'Dark Mode',
                range: 'Number Range:',
                speed: 'Reading Speed:',
                delay: 'Delay:',
                start: 'START',
                stop: 'STOP',
                min: 'Min',
                max: 'Max',
                history: 'History',
                help: 'Help',
                helpTitle: 'Language Support Help',
                helpText1: 'Our application supports all languages, but your browser and operating system must have the relevant language packages installed.',
                closeHelp: 'OK',
                totalNumbersLabel: 'Total Numbers',
                totalTimeLabel: 'Total Time (min)',
                favoriteLanguageLabel: 'Most Used Language',
                themeDark: 'Dark Mode',
                themeLight: 'Light Mode'
            },
            'en-GB': {
                title: 'Number Reader',
                theme: 'Dark Mode',
                range: 'Number Range:',
                speed: 'Reading Speed:',
                delay: 'Delay:',
                start: 'START',
                stop: 'STOP',
                min: 'Min',
                max: 'Max',
                history: 'History',
                help: 'Help',
                helpTitle: 'Language Support Help',
                helpText1: 'Our application supports all languages, but your browser and operating system must have the relevant language packages installed.',
                closeHelp: 'OK',
                totalNumbersLabel: 'Total Numbers',
                totalTimeLabel: 'Total Time (min)',
                favoriteLanguageLabel: 'Most Used Language',
                themeDark: 'Dark Mode',
                themeLight: 'Light Mode'
            },
            'de-DE': {
                title: 'Zahlenleser',
                theme: 'Dunkelmodus',
                range: 'Zahlenbereich:',
                speed: 'Lesegeschwindigkeit:',
                delay: 'VerzÃ¶gerung:',
                start: 'START',
                stop: 'STOPP',
                min: 'Min',
                max: 'Max',
                history: 'Verlauf',
                help: 'Hilfe',
                helpTitle: 'SprachunterstÃ¼tzung Hilfe',
                helpText1: 'Unsere Anwendung unterstÃ¼tzt alle Sprachen, aber Ihr Browser und Betriebssystem mÃ¼ssen die entsprechenden Sprachpakete installiert haben.',
                closeHelp: 'OK',
                totalNumbersLabel: 'Gesamtzahlen',
                totalTimeLabel: 'Gesamtzeit (min)',
                favoriteLanguageLabel: 'Am hÃ¤ufigsten verwendete Sprache',
                themeDark: 'Dark Mode',
                themeLight: 'Light Mode'
            },
            'fr-FR': {
                title: 'Lecteur de Nombres',
                theme: 'Mode Sombre',
                range: 'Plage de Nombres:',
                speed: 'Vitesse de Lecture:',
                delay: 'DÃ©lai:',
                start: 'DÃ‰MARRER',
                stop: 'ARRÃŠTER',
                min: 'Min',
                max: 'Max',
                history: 'Historique',
                help: 'Aide',
                helpTitle: 'Aide pour le Support Linguistique',
                helpText1: 'Notre application prend en charge toutes les langues, mais votre navigateur et systÃ¨me d\'exploitation doivent avoir les packages linguistiques correspondants installÃ©s.',
                closeHelp: 'OK',
                totalNumbersLabel: 'Nombres Totaux',
                totalTimeLabel: 'Temps Total (min)',
                favoriteLanguageLabel: 'Langue la Plus UtilisÃ©e'
            },
            'es-ES': {
                title: 'Lector de NÃºmeros',
                theme: 'Modo Oscuro',
                range: 'Rango de NÃºmeros:',
                speed: 'Velocidad de Lectura:',
                delay: 'Retraso:',
                start: 'COMENZAR',
                stop: 'DETENER',
                min: 'MÃ­n',
                max: 'MÃ¡x',
                history: 'Historial',
                help: 'Ayuda',
                helpTitle: 'Ayuda de Soporte de Idioma',
                helpText1: 'Nuestra aplicaciÃ³n soporta todos los idiomas, pero su navegador y sistema operativo deben tener los paquetes de idioma relevantes instalados.',
                closeHelp: 'OK',
                totalNumbersLabel: 'NÃºmeros Totales',
                totalTimeLabel: 'Tiempo Total (min)',
                favoriteLanguageLabel: 'Idioma MÃ¡s Usado'
            },
            'ja-JP': {
                title: 'æ•°å­—ãƒªãƒ¼ãƒ€ãƒ¼',
                theme: 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰',
                range: 'æ•°å­—ã®ç¯„å›²:',
                speed: 'èª­ã¿ä¸Šã’é€Ÿåº¦:',
                delay: 'é…å»¶:',
                start: 'é–‹å§‹',
                stop: 'åœæ­¢',
                min: 'æœ€å°',
                max: 'æœ€å¤§',
                history: 'å±¥æ­´',
                help: 'ãƒ˜ãƒ«ãƒ—',
                helpTitle: 'è¨€èªã‚µãƒãƒ¼ãƒˆãƒ˜ãƒ«ãƒ—',
                helpText1: 'å½“ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã™ã¹ã¦ã®è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ãŒã€ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¨ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«è©²å½“ã™ã‚‹è¨€èªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚',
                closeHelp: 'OK',
                totalNumbersLabel: 'ç·æ•°',
                totalTimeLabel: 'ç·æ™‚é–“(åˆ†)',
                favoriteLanguageLabel: 'æœ€ã‚‚ä½¿ç”¨ã•ã‚ŒãŸè¨€èª'
            },
            'ru-RU': {
                title: 'Ğ§Ğ¸Ñ‚Ğ°Ñ‚ĞµĞ»ÑŒ Ğ§Ğ¸ÑĞµĞ»',
                theme: 'Ğ¢ĞµĞ¼Ğ½Ñ‹Ğ¹ Ğ ĞµĞ¶Ğ¸Ğ¼',
                range: 'Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ§Ğ¸ÑĞµĞ»:',
                speed: 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ§Ñ‚ĞµĞ½Ğ¸Ñ:',
                delay: 'Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°:',
                start: 'Ğ¡Ğ¢ĞĞ Ğ¢',
                stop: 'Ğ¡Ğ¢ĞĞŸ',
                min: 'ĞœĞ¸Ğ½',
                max: 'ĞœĞ°ĞºÑ',
                history: 'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ',
                help: 'ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ',
                helpTitle: 'ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ Ğ¿Ğ¾ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞµ Ğ¯Ğ·Ñ‹ĞºĞ¾Ğ²',
                helpText1: 'ĞĞ°ÑˆĞµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ²ÑĞµ ÑĞ·Ñ‹ĞºĞ¸, Ğ½Ğ¾ Ğ²Ğ°Ñˆ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ¸ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¸Ğ¼ĞµÑ‚ÑŒ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹.',
                closeHelp: 'OK',
                totalNumbersLabel: 'Ğ’ÑĞµĞ³Ğ¾ Ğ§Ğ¸ÑĞµĞ»',
                totalTimeLabel: 'ĞĞ±Ñ‰ĞµĞµ Ğ’Ñ€ĞµĞ¼Ñ (Ğ¼Ğ¸Ğ½)',
                favoriteLanguageLabel: 'Ğ¡Ğ°Ğ¼Ñ‹Ğ¹ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğ¹ Ğ¯Ğ·Ñ‹Ğº'
            },
            'zh-CN': {
                title: 'æ•°å­—é˜…è¯»å™¨',
                theme: 'æ·±è‰²æ¨¡å¼',
                range: 'æ•°å­—èŒƒå›´:',
                speed: 'é˜…è¯»é€Ÿåº¦:',
                delay: 'å»¶è¿Ÿ:',
                start: 'å¼€å§‹',
                stop: 'åœæ­¢',
                min: 'æœ€å°',
                max: 'æœ€å¤§',
                history: 'å†å²è®°å½•',
                help: 'å¸®åŠ©',
                helpTitle: 'è¯­è¨€æ”¯æŒå¸®åŠ©',
                helpText1: 'æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ”¯æŒæ‰€æœ‰è¯­è¨€ï¼Œä½†æ‚¨çš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿå¿…é¡»å®‰è£…ç›¸å…³çš„è¯­è¨€åŒ…ã€‚',
                closeHelp: 'ç¡®å®š',
                totalNumbersLabel: 'æ€»æ•°',
                totalTimeLabel: 'æ€»æ—¶é—´(åˆ†é’Ÿ)',
                favoriteLanguageLabel: 'æœ€å¸¸ç”¨è¯­è¨€'
            },
            'it-IT': {
                title: 'Lettore di Numeri',
                theme: 'ModalitÃ  Scura',
                range: 'Intervallo Numeri:',
                speed: 'VelocitÃ  Lettura:',
                delay: 'Ritardo:',
                start: 'INIZIA',
                stop: 'FERMA',
                min: 'Min',
                max: 'Max',
                history: 'Cronologia',
                help: 'Aiuto',
                helpTitle: 'Guida al Supporto Linguistico',
                helpText1: 'La nostra applicazione supporta tutte le lingue, ma il tuo browser e sistema operativo devono avere i pacchetti linguistici pertinenti installati.',
                closeHelp: 'OK',
                totalNumbersLabel: 'Numeri Totali',
                totalTimeLabel: 'Tempo Totale (min)',
                favoriteLanguageLabel: 'Lingua PiÃ¹ Utilizzata'
            }
        };
        
                function updateLanguage(lang) {
            const elements = document.querySelectorAll('.lang-text');
            elements.forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                } else if (translations['en-US'] && translations['en-US'][key]) {
                    // EÄŸer seÃ§ilen dilde Ã§eviri yoksa Ä°ngilizce'ye dÃ¶n
                    element.textContent = translations['en-US'][key];
                }
            });
            document.getElementById('minValue').placeholder = translations[lang]?.min || 'Min';
            document.getElementById('maxValue').placeholder = translations[lang]?.max || 'Max';
        }
        
        function updateStats() {
            document.getElementById('totalNumbers').textContent = totalNumbers;
            document.getElementById('totalTime').textContent = Math.floor(totalTime / 60);
            
            let maxLang = '-';
            let maxCount = 0;
            for (const [lang, count] of Object.entries(languageUsage)) {
                if (count > maxCount) {
                    maxCount = count;
                    maxLang = lang;
                }
            }
            document.getElementById('favoriteLanguage').textContent = maxLang;
        }
        
        // 7. OLAY DÄ°NLEYÄ°CÄ°LERÄ°

                // YardÄ±m sistemi
        document.getElementById('helpBtn').addEventListener('click', function() {
            document.getElementById('helpModal').style.display = 'flex';
        });

        document.getElementById('closeHelp').addEventListener('click', function() {
            document.getElementById('helpModal').style.display = 'none';
        });

        document.getElementById('startBtn').addEventListener('click', startReading);
        document.getElementById('stopBtn').addEventListener('click', stopReading);
        
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                isActive ? stopReading() : startReading();
            }
        });
        
                languageSelect.addEventListener('change', async () => {
            const selectedLang = languageSelect.value;
            
            // HÄ±z limitlerini ayarla
            if (selectedLang.split('-')[0] !== 'tr') {
                speedControl.max = 2.0;
                if (parseFloat(speedControl.value) > 2.0) {
                    speedControl.value = 2.0;
                    speedDisplay.textContent = '2.0x';
                }
            } else {
                speedControl.max = 5.0;
            }
            
            // DiÄŸer ayarlar
            updateLanguage(selectedLang);
            await sesleriYukle();
            sesiGuncelle();
            
            // EÄŸer aktifse yeniden baÅŸlat
            if (isActive) {
                const wasActive = isActive;
                await stopReading();
                if (wasActive) {
                    startReading();
                }
            }
        });

                function handleTTSerror(error, lang) {
            console.error("TTS HatasÄ±:", error);
            
            // Hata tÃ¼rÃ¼ne gÃ¶re iÅŸlem yap
            if (error.error === 'interrupted' || error.error === 'canceled') {
                return; // KullanÄ±cÄ± durdurduysa gÃ¶rmezden gel
            }
            
            // Dil desteÄŸi hatasÄ±
            const notification = createNotification(
                `Seslendirme hatasÄ±: ${lang} dili desteklenmiyor olabilir`,
                'âŒ'
            );
            showNotification(notification);
            
            // Ä°ngilizce'ye geÃ§
            if (lang !== 'en-US') {
                languageSelect.value = 'en-US';
                updateLanguage('en-US');
                sesiGuncelle();
            }
        }



                languageSelect.addEventListener('change', () => {
            speedControl.value = 1.0;
            speedDisplay.textContent = '1.0x';
            updateLanguage(languageSelect.value);
            
            // Yeni ses kontrol fonksiyonu
            sesiGuncelle();
            
            if(isActive) {
                window.speechSynthesis.cancel();
                clearTimeout(timeoutID);
                readNumber();
            }
        });
        
        speedControl.addEventListener('input', () => {
            const speed = parseFloat(speedControl.value);
            speedDisplay.textContent = speed.toFixed(1) + 'x';
            speech.rate = speed;
        });
        
        delayControl.addEventListener('input', () => {
            delayDisplay.textContent = delayControl.value + 's';
        });
        
            // GeÃ§miÅŸi temizleme fonksiyonu
    function clearHistory() {
        numberHistory = [];
        document.getElementById('historyList').innerHTML = '';
        document.querySelector('.history-title').classList.remove('active');
    }

    // startReading fonksiyonunu gÃ¼ncelleyin
    function startReading() {
        const { isSafari } = getBrowserInfo();
        
        if (isSafari) {
            const initSpeech = new SpeechSynthesisUtterance(" ");
            initSpeech.volume = 0;
            window.speechSynthesis.speak(initSpeech);
            initSpeech.onend = () => {
                setTimeout(readNumber, 200);
            };
        } else {
            setTimeout(readNumber, 300);
        }
        
        isActive = true;
        document.getElementById('startBtn').disabled = true;
        document.getElementById('stopBtn').disabled = false;
        languageSelect.disabled = true;
        document.getElementById('minValue').disabled = true;
        document.getElementById('maxValue').disabled = true;
        
        startTime = Date.now();
        totalNumbers = 0;
        updateStats();
    }

        function checkLanguageSupport() {
    const voices = window.speechSynthesis.getVoices();
    checkSupportedLanguages(voices);
    }

        // languageSelect event listener'Ä±nÄ± gÃ¼ncelleyin
        languageSelect.addEventListener('change', () => {
            document.getElementById('clearHistoryBtn').addEventListener('click', clearHistory);
            speedControl.value = 1.0;
            speedDisplay.textContent = '1.0x';
            updateLanguage(languageSelect.value);
            clearHistory(); // Dil deÄŸiÅŸtiÄŸinde geÃ§miÅŸi temizle
            sesiGuncelle();
            
            if(isActive) {
                window.speechSynthesis.cancel();
                clearTimeout(timeoutID);
                readNumber();
            }
        });

            // 1. Ã‡erez PolitikasÄ± UyarÄ±sÄ± iÃ§in Ã‡Ã¶zÃ¼m
        document.addEventListener('DOMContentLoaded', function() {
            // SameSite Ã§erez ayarÄ±
            document.cookie = "sameSite=None; Secure";
            
            // Chrome'un Ã§erez uyarÄ±sÄ±nÄ± yÃ¶netme
            if (navigator.userAgent.includes('Chrome')) {
                console.log('Chrome Ã§erez politikasÄ± uyarÄ±sÄ± yÃ¶netiliyor');
            }
        });

        // 2. Analytics Fallback MekanizmasÄ±
        let analyticsLoaded = false;

        function initializeAnalytics() {
            if (typeof va === 'function') {
                va('send', 'pageview');
                analyticsLoaded = true;
            } else {
                console.log('Vercel Analytics yÃ¼klenmedi, alternatif izleme...');
                // Alternatif izleme kodu (isteÄŸe baÄŸlÄ±)
                if (window.location.hostname !== 'localhost') {
                    console.log('Pageview tracked (fallback)');
                }
            }
        }

        // 3. AdSense Fallback MekanizmasÄ±
        function loadAdsenseWithFallback() {
            try {
                if (typeof adsbygoogle === 'undefined') {
                    const adScript = document.createElement('script');
                    adScript.async = true;
                    adScript.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3050374663523366";
                    adScript.crossOrigin = "anonymous";
                    adScript.onerror = function() {
                        console.log('AdSense engellendi, reklam alanlarÄ± kaldÄ±rÄ±lÄ±yor');
                        document.querySelectorAll('.ad-container').forEach(el => el.style.display = 'none');
                    };
                    document.head.appendChild(adScript);
                }
            } catch (e) {
                console.error('AdSense yÃ¼kleme hatasÄ±:', e);
            }
        }

        // TÃ¼m sayfa yÃ¼klendikten sonra Ã§alÄ±ÅŸtÄ±r
        window.addEventListener('load', function() {
            // Analytics'i baÅŸlat
            setTimeout(initializeAnalytics, 500);
            
            // AdSense'i yÃ¼kle (1 saniye gecikmeyle)
            setTimeout(loadAdsenseWithFallback, 1000);
        });
        </script>
</body>
</html>